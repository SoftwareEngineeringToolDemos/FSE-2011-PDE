// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 10.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace Tum.PDE.ToolFramework.Templates.ViewModel
{
    using Tum.PDE.LanguageDSL;
    using System.Collections;
    using System.Collections.Generic;
    using System.Collections.ObjectModel;
    using System.Linq;
    using System;
    
    
    #line 1 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
    [System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "10.0.0.0")]
    public partial class DiagramViewModelGenerator : BaseTemplate
    {
        #region ToString Helpers
        /// <summary>
        /// Utility class to produce culture-oriented representation of an object as a string.
        /// </summary>
        public class ToStringInstanceHelper
        {
            private System.IFormatProvider formatProviderField  = global::System.Globalization.CultureInfo.InvariantCulture;
            /// <summary>
            /// Gets or sets format provider to be used by ToStringWithCulture method.
            /// </summary>
            public System.IFormatProvider FormatProvider
            {
                get
                {
                    return this.formatProviderField ;
                }
                set
                {
                    if ((value != null))
                    {
                        this.formatProviderField  = value;
                    }
                }
            }
            /// <summary>
            /// This is called from the compile/run appdomain to convert objects within an expression block to a string
            /// </summary>
            public string ToStringWithCulture(object objectToConvert)
            {
                if ((objectToConvert == null))
                {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                System.Type t = objectToConvert.GetType();
                System.Reflection.MethodInfo method = t.GetMethod("ToString", new System.Type[] {
                            typeof(System.IFormatProvider)});
                if ((method == null))
                {
                    return objectToConvert.ToString();
                }
                else
                {
                    return ((string)(method.Invoke(objectToConvert, new object[] {
                                this.formatProviderField })));
                }
            }
        }
        private ToStringInstanceHelper toStringHelperField = new ToStringInstanceHelper();
        public ToStringInstanceHelper ToStringHelper
        {
            get
            {
                return this.toStringHelperField;
            }
        }
        #endregion
        public override string TransformText()
        {
            this.GenerationEnvironment = null;
            this.Write(" \r\n");
            this.Write(@"using DslModeling = global::Microsoft.VisualStudio.Modeling;
using DslEditorModeling = global::Tum.PDE.ToolFramework.Modeling;
using DslEditorViewDiagrams = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.DiagramSurface;
using DslEditorMenuModel = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Menu;
using DslEditorCommands = global::Tum.PDE.ToolFramework.Modeling.Visualization.Commands;
using DslEditorEvents = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Messaging.Events;
using DslEditorDiagrams = global::Tum.PDE.ToolFramework.Modeling.Diagrams;
using DslEditorSelection = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Selection;
using DslEditorViewModels = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel;
using DslEditorDependencies = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Dependencies;
using DslEditorServices = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Services;
using DslEditorDD = global::Tum.PDE.ToolFramework.Modeling.Visualization.Controls.Attached.DragDrop;

using DslEditorSelectionStruct = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Selection.SearchElementWithRSType.SearchElementWithRSTypeStruct;

");
            
            #line 23 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	//this.Write(CodeExamplesGeneratorHelper.Instance.GenerateCodeExampleForDiagram(this.MetaModel));

            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 27 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

foreach(DiagramClass diagramClass in this.MetaModel.AllDiagramClasses)
{
	if( !(diagramClass is DependencyDiagram) && diagramClass is TemplatedDiagramClass )
	{
		this.Write(TemplatedDiagramGeneratorHelper.Instance.GenerateDiagramViewModel(this.MetaModel, diagramClass));
	}
	else
		GenerateDiagramViewModel(this.MetaModel, diagramClass);
}

            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        #line 38 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
 
public void GenerateDiagramViewModel(MetaModel dm, DiagramClass diagramClass)
{
		Dictionary<DomainClass, List<EmbeddingRelationship>> embeddingChildParentMapping = new Dictionary<DomainClass, List<EmbeddingRelationship>>();
		foreach (PresentationElementClass element in diagramClass.PresentationElements)
		{
            if (element is ShapeClass)
            {
				ShapeClass shapeClass = element as ShapeClass;
				DomainClass domainClass = shapeClass.DomainClass;

				if( domainClass == null )
					continue;
				
				if( !embeddingChildParentMapping.ContainsKey(domainClass) )
					embeddingChildParentMapping.Add(domainClass, new List<EmbeddingRelationship>());
				
				foreach(DomainRole rolesPlayed in domainClass.RolesPlayed)
				{
					if( rolesPlayed.Relationship.Target == rolesPlayed && 
						rolesPlayed.Relationship is EmbeddingRelationship && 
						rolesPlayed.Relationship.InheritanceModifier != InheritanceModifier.Abstract )
							if( !embeddingChildParentMapping[domainClass].Contains(rolesPlayed.Relationship as EmbeddingRelationship) )
								embeddingChildParentMapping[domainClass].Add(rolesPlayed.Relationship as EmbeddingRelationship);
				}
				
			}
		}
		
	string baseClass = "DslEditorViewDiagrams::DiagramSurfaceViewModel";
	if( diagramClass.IsCustom )
		baseClass = "DslEditorViewDiagrams::BaseDiagramSurfaceViewModel";
	
	if( diagramClass is SpecificDependencyDiagram)
	{
		if( (diagramClass as SpecificDependencyDiagram).DomainClass == null )
			return;
		
		baseClass = "DslEditorDependencies::SpecificDependenciesViewModel";
	}
	else if( diagramClass is DependencyDiagram)
	{
		baseClass = "DslEditorDependencies::GraphicalDependenciesViewModel";
	}

	if( diagramClass is SpecificDependencyDiagram )
	{

        
        #line default
        #line hidden
        
        #line 85 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("namespace ");

        
        #line default
        #line hidden
        
        #line 86 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Namespace));

        
        #line default
        #line hidden
        
        #line 86 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".ViewModel\r\n{\r\n\t/// <summary>\r\n\t/// This class represents the specific dependenci" +
        "es item for ");

        
        #line default
        #line hidden
        
        #line 89 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 89 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".\r\n\t/// </summary>\r\n\tpublic partial class ");

        
        #line default
        #line hidden
        
        #line 91 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 91 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 91 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"ItemViewModel : DslEditorDependencies::SpecificDependenciesItemViewModel
	{
		/// <summary>
        /// Constructor. The view model constructed this way does not react on model changes, as such DoHookUpEvents is false.
        /// </summary>
        /// <param name=""viewModelStore"">The store this view model belongs to.</param>
        /// <param name=""element"">Element represented by this view model.</param>
        public ");

        
        #line default
        #line hidden
        
        #line 98 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 98 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 98 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ItemViewModel(DslEditorViewModels.Data.ViewModelStore viewModelStore, DslModeling" +
        "::ModelElement element)\r\n            : base(viewModelStore, element)\r\n        {\r" +
        "\n\r\n        }\r\n\t}\r\n}\r\n");

        
        #line default
        #line hidden
        
        #line 105 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	}

        
        #line default
        #line hidden
        
        #line 107 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("namespace ");

        
        #line default
        #line hidden
        
        #line 108 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Namespace));

        
        #line default
        #line hidden
        
        #line 108 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".ViewModel\r\n{\r\n\t/// <summary>\r\n\t/// This class represents the default diagram sur" +
        "face view model of the ");

        
        #line default
        #line hidden
        
        #line 111 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.ApplicationName));

        
        #line default
        #line hidden
        
        #line 111 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".\r\n\t/// \r\n\t/// Double-derived class to allow easier code customization.\r\n\t/// </s" +
        "ummary>\r\n\tpublic partial class ");

        
        #line default
        #line hidden
        
        #line 115 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 115 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 115 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModel : ");

        
        #line default
        #line hidden
        
        #line 115 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 115 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 115 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"SurfaceViewModelBase
	{
		#region Constructor
		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""viewModelStore"">View model store containing this view model.</param>
		/// <param name=""modelContext"">Model context.</param>
        public ");

        
        #line default
        #line hidden
        
        #line 123 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 123 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 123 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModel(");

        
        #line default
        #line hidden
        
        #line 123 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 123 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"ViewModelStore viewModelStore, DslEditorModeling::ModelContext modelContext)
            : this(viewModelStore, null, modelContext)
        {
        }
		
		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""viewModelStore"">View model store containing this view model.</param>
		/// <param name=""diagram"">Diagram.</param>
		/// <param name=""modelContext"">Model context.</param>
        public ");

        
        #line default
        #line hidden
        
        #line 134 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 134 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 134 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModel(");

        
        #line default
        #line hidden
        
        #line 134 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 134 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ViewModelStore viewModelStore, DslEditorDiagrams::Diagram diagram, DslEditorModel" +
        "ing::ModelContext modelContext)\r\n            : base(viewModelStore, diagram, mod" +
        "elContext)\r\n        {\r\n        }\r\n\t\t\r\n");

        
        #line default
        #line hidden
        
        #line 139 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 142 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""viewModelStore"">View model store containing this view model.</param>
		/// <param name=""diagram"">Diagram.</param>
		/// <param name=""modelContext"">Model context.</param>
		/// <param name=""parentModelContext"">Parent model context.</param>
        public ");

        
        #line default
        #line hidden
        
        #line 150 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 150 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 150 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModel(");

        
        #line default
        #line hidden
        
        #line 150 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 150 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"ViewModelStore viewModelStore, DslEditorDiagrams::Diagram diagram, DslEditorModeling::ModelContext modelContext, DslEditorModeling::ModelContext parentModelContext)
            : base(viewModelStore, diagram, modelContext, parentModelContext)
        {
        }
");

        
        #line default
        #line hidden
        
        #line 154 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 156 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t#endregion\r\n\t}\r\n\t\r\n\t/// <summary>\r\n\t/// This class represents the default diagr" +
        "am surface view model of the ");

        
        #line default
        #line hidden
        
        #line 161 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.ApplicationName));

        
        #line default
        #line hidden
        
        #line 161 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".\r\n\t/// \r\n\t/// This is the abstract base class.\r\n\t/// </summary>\r\n\tpublic abstrac" +
        "t partial class ");

        
        #line default
        #line hidden
        
        #line 165 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 165 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 165 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModelBase : ");

        
        #line default
        #line hidden
        
        #line 165 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseClass));

        
        #line default
        #line hidden
        
        #line 165 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\r\n\t{\r\n");

        
        #line default
        #line hidden
        
        #line 167 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 170 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\tDslEditorModeling::ModelContext parentModelContext = null;\r\n\t\t\r\n");

        
        #line default
        #line hidden
        
        #line 173 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}
		
		if( diagramClass is SpecificDependencyDiagram )
		{

        
        #line default
        #line hidden
        
        #line 178 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"		#region SpecificDependencyDiagram
		/// <summary>
        /// Gets the type of the model element that specifies the elements in the list of specific items.
        /// </summary>
        public override System.Guid ModelElementType
        {
            get 
			{ 
				return ");

        
        #line default
        #line hidden
        
        #line 187 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture((diagramClass as SpecificDependencyDiagram).DomainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 187 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@".DomainClassId; 
			}
        }
		
		/// <summary>
        /// Creates a specific view model for the given model element.
        /// </summary>
        /// <param name=""store"">Viewmodelstore.</param>
        /// <param name=""modelElement"">Model element to create a specific VM for.</param>
        /// <returns>Specific VM.</returns>
        protected override DslEditorDependencies::SpecificDependenciesItemViewModel CreateSpecificViewModel(DslEditorViewModels.Data.ViewModelStore store, DslModeling::ModelElement modelElement)
		{
			");

        
        #line default
        #line hidden
        
        #line 199 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 199 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 199 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ItemViewModel vm = new ");

        
        #line default
        #line hidden
        
        #line 199 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 199 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 199 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ItemViewModel(store, modelElement);\r\n\t\t\treturn vm;\r\n\t\t}\r\n\t\t#endregion\r\n");

        
        #line default
        #line hidden
        
        #line 203 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}		

        
        #line default
        #line hidden
        
        #line 205 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"		#region Constructor
		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""viewModelStore"">View model store containing this view model.</param>
		/// <param name=""diagram"">Diagram.</param>
		/// <param name=""modelContext"">Model context.</param>
        protected ");

        
        #line default
        #line hidden
        
        #line 213 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 213 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 213 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModelBase(");

        
        #line default
        #line hidden
        
        #line 213 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 213 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ViewModelStore viewModelStore, DslEditorDiagrams::Diagram diagram, DslEditorModel" +
        "ing::ModelContext modelContext)\r\n            : base(viewModelStore, diagram, mod" +
        "elContext)\r\n        {\r\n\t\t\t\r\n        }\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 219 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 222 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""viewModelStore"">View model store containing this view model.</param>
		/// <param name=""diagram"">Diagram.</param>
		/// <param name=""modelContext"">Model context.</param>
		/// <param name=""parentModelContext"">Parent model context.</param>
        protected ");

        
        #line default
        #line hidden
        
        #line 230 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 230 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 230 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModelBase(");

        
        #line default
        #line hidden
        
        #line 230 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 230 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"ViewModelStore viewModelStore, DslEditorDiagrams::Diagram diagram, DslEditorModeling::ModelContext modelContext, DslEditorModeling::ModelContext parentModelContext)
            : base(viewModelStore, diagram, modelContext)
        {
			this.parentModelContext = parentModelContext;
        }
");

        
        #line default
        #line hidden
        
        #line 235 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 237 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t#endregion\r\n\t\t\r\n\t\t#region IDockableViewModel\r\n");

        
        #line default
        #line hidden
        
        #line 241 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	if( diagramClass is DesignerDiagramClass )
	{

        
        #line default
        #line hidden
        
        #line 244 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"        /// <summary>
        /// Gets the header image URI.
        /// </summary>
        public override string DockingPaneImageUri
        {
            get
            {
                return ""pack://application:,,,/Tum.PDE.ToolFramework.Images;component/Ribbon/DiagramSurface-16.png"";
            }
        }

");

        
        #line default
        #line hidden
        
        #line 256 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	}

        
        #line default
        #line hidden
        
        #line 258 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t/// <summary>\r\n        /// Unique name of the property grid docking window.\r\n  " +
        "      /// </summary>\r\n        public override string DockingPaneName\r\n        {\r" +
        "\n            get { return \"");

        
        #line default
        #line hidden
        
        #line 264 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 264 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceDockWindowPane\"; }\r\n        }\r\n\r\n\t\t/// <summary>\r\n        /// Title of the" +
        " docking windo.\r\n        /// </summary>\r\n        public override string DockingP" +
        "aneTitle\r\n        {\r\n            get { return \"");

        
        #line default
        #line hidden
        
        #line 272 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Title));

        
        #line default
        #line hidden
        
        #line 272 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"""; }
        }
        		
		/// <summary>
		/// Gets the docking pane style. 
		/// </summary>
		public override global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.DockingPaneStyle DockingPaneStyle
        {
            get
            {
                return global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.DockingPaneStyle.DockedInDocumentPane;
            }
        }
        #endregion		
		
		#region Initialization
        /// <summary>
        /// Initialize.
        /// </summary>
        protected override void Initialize()
        {
            base.Initialize();
			
");

        
        #line default
        #line hidden
        
        #line 295 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 298 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("            if (IsIncludedModelInstance)\r\n                return;\r\n\r\n\t\t\tif( paren" +
        "tModelContext == null )\r\n\t\t\t{\r\n\t\t\t\tforeach(DslEditorModeling::BaseModelContext m" +
        "odelContext in this.ModelData.AvailableModelContexts)\r\n\t\t\t\t{\r\n\t\t\t\t\tif( modelCont" +
        "ext.Name == \"");

        
        #line default
        #line hidden
        
        #line 306 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.ModelContext.Name));

        
        #line default
        #line hidden
        
        #line 306 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tparentModelContext = modelContext as DslEditorModeling::ModelCo" +
        "ntext;\r\n\t\t\t\t\t\t//parentModelContext = modelContext as ");

        
        #line default
        #line hidden
        
        #line 309 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Namespace));

        
        #line default
        #line hidden
        
        #line 309 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 309 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.ModelContext.Name));

        
        #line default
        #line hidden
        
        #line 309 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"ModelContext;
						break;
					}
				}
			}
			
			// subscribe to changes of the diagram class, that is hosted by this view model.
			if( parentModelContext != null && this.Diagram == null)
			{
				DslEditorDiagrams::Diagram diagram = parentModelContext.GetDiagram(""");

        
        #line default
        #line hidden
        
        #line 318 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 318 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@""") as DslEditorDiagrams::Diagram;
				if( diagram != null )
				{
					this.Reset();
					InitIncludedDiagrams(diagram);
					this.Diagram = diagram;
				}

				parentModelContext.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(ModelContext_PropertyChanged);
			}
");

        
        #line default
        #line hidden
        
        #line 328 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 330 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\t\r\n        }\r\n");

        
        #line default
        #line hidden
        
        #line 332 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 335 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\r\n        void ModelContext_PropertyChanged(object sender, System.ComponentMode" +
        "l.PropertyChangedEventArgs e)\r\n        {\r\n            if( e.PropertyName == \"");

        
        #line default
        #line hidden
        
        #line 338 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 338 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\" )\r\n\t\t\t{\r\n\t\t\t\tthis.Reset();\r\n\t\t\t\tDslEditorDiagrams::Diagram diagram = parentMode" +
        "lContext.GetDiagram(\"");

        
        #line default
        #line hidden
        
        #line 341 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 341 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\") as DslEditorDiagrams::Diagram;\r\n\t\t\t\tInitIncludedDiagrams(diagram);\r\n\t\t\t\tthis.D" +
        "iagram = diagram;\r\n\t\t\t\t\r\n\t\t\t\t//InitIncludedDiagrams(parentModelContext.");

        
        #line default
        #line hidden
        
        #line 345 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 345 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(");\r\n\t\t\t\t//this.Diagram = parentModelContext.");

        
        #line default
        #line hidden
        
        #line 346 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 346 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(";\t\t\t\t\r\n\t\t\t}\r\n        }\r\n\t\t[System.Diagnostics.CodeAnalysis.SuppressMessage(\"Micro" +
        "soft.Reliability\", \"CA2000:Dispose objects before losing scope\")]\r\n\t\tvoid InitIn" +
        "cludedDiagrams(DslEditorDiagrams::Diagram includingDiagram)\r\n\t\t{\r\n");

        
        #line default
        #line hidden
        
        #line 352 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	if( diagramClass is DesignerDiagramClass )
	{
		DesignerDiagramClass designerDiagramClass = diagramClass as DesignerDiagramClass;
		if( designerDiagramClass.IncludedDiagramClasses.Count > 0 )
		{

        
        #line default
        #line hidden
        
        #line 358 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\tforeach(DslEditorDiagrams::Diagram diagram in includingDiagram.IncludedDiagram" +
        "s)\r\n\t\t\t{\r\n");

        
        #line default
        #line hidden
        
        #line 361 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		foreach(DiagramClass d in (diagramClass as DesignerDiagramClass).IncludedDiagramClasses )
		{

        
        #line default
        #line hidden
        
        #line 364 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\tif( diagram.UniqueName == \"");

        
        #line default
        #line hidden
        
        #line 365 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Name));

        
        #line default
        #line hidden
        
        #line 365 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.Name));

        
        #line default
        #line hidden
        
        #line 365 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\")\r\n\t\t\t\t{\r\n\t\t\t\t\tDslEditorViewDiagrams::DiagramSurfaceViewModel dVm = new ");

        
        #line default
        #line hidden
        
        #line 367 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Namespace));

        
        #line default
        #line hidden
        
        #line 367 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 367 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Name));

        
        #line default
        #line hidden
        
        #line 367 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.Name));

        
        #line default
        #line hidden
        
        #line 367 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("SurfaceViewModel(\r\n\t\t\t\t\t\tthis.ViewModelStore.GetExternViewModelStore(typeof(");

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Namespace));

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Name));

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ViewModelStore)) as ");

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Namespace));

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(d.ModelContext.MetaModel.Name));

        
        #line default
        #line hidden
        
        #line 368 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ViewModelStore, diagram, this.ModelContext);\r\n\t\t\t\t\tdVm.ParentDiagramSurfaceViewMo" +
        "del = this;\r\n\t\t\t\t\tdVm.IsIncludedModelInstance = true;\r\n\t\t\t\t\tthis.AddIncludedSurf" +
        "aceViewModels(dVm);\r\n\t\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 373 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}			

        
        #line default
        #line hidden
        
        #line 375 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 377 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}
	}

        
        #line default
        #line hidden
        
        #line 380 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\r\n\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 382 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 384 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\r\n        #endregion\r\n");

        
        #line default
        #line hidden
        
        #line 386 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 389 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\r\n\t\t/// <summary>\r\n        /// Gets the diagram class type.\r\n        /// </summar" +
        "y>\r\n        /// <returns></returns>\r\n        public override System.Guid GetDiag" +
        "ramClassType()\r\n\t\t{\r\n\t\t\treturn ");

        
        #line default
        #line hidden
        
        #line 397 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Namespace));

        
        #line default
        #line hidden
        
        #line 397 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 397 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(diagramClass.Name));

        
        #line default
        #line hidden
        
        #line 397 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@".DomainClassId;
		}

		
		#region Methods
		/// <summary>
        /// Verifies if a relationship can be created based on the given data.
        /// </summary>
        /// <param name=""info"">Info specifying the relationship to create.</param>
        /// <returns>True if a relationship can be created. False otherwise.</returns>
        public override bool CanCreateRelationship(DslEditorViewDiagrams::ViewModelRelationshipCreationInfo info)
		{
			if( info.Source == null || info.Target == null )
				return false;
				
			if( info.Source.ShapeElement == null || info.Target.ShapeElement == null )
				return false;
				
			if( info.Source.ShapeElement.Element == null || info.Target.ShapeElement.Element == null )
				return false;
				
			if (!info.Source.ShapeElement.TakesPartInRelationship)
                return false;

			bool bCanCreate = false;			
");

        
        #line default
        #line hidden
        
        #line 422 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	foreach (PresentationElementClass element in diagramClass.PresentationElements)
	{
		if( element is RelationshipShapeClass )
		{
			RelationshipShapeClass rsShape = element as RelationshipShapeClass;
			DomainRelationship con = rsShape.ReferenceRelationship;
			if( con != null )
			{

        
        #line default
        #line hidden
        
        #line 431 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\r\n\t\t\tif( !bCanCreate )\r\n\t\t\t\tbCanCreate = CanCreateRelationshipShape");

        
        #line default
        #line hidden
        
        #line 434 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 434 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(info);\r\n");

        
        #line default
        #line hidden
        
        #line 435 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			}
				//if( CodeGenerationUtilities.ShapeTakesPart(shapeClass, con) )
		}
		else if( element is MappingRelationshipShapeClass )
		{
			MappingRelationshipShapeClass rsShape = element as MappingRelationshipShapeClass;
			if( rsShape.DomainClass != null )
			{
				ReferenceRelationship conSource = rsShape.Source;
				ReferenceRelationship conTarget = rsShape.Target;
				if( conSource != null && conTarget != null )
				{
					DomainClass source = conSource.Target.RolePlayer as DomainClass;
					DomainClass target = conTarget.Target.RolePlayer as DomainClass;
					if( source != null && target != null )
					{

        
        #line default
        #line hidden
        
        #line 452 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\r\n\t\t\tif( !bCanCreate )\r\n\t\t\t\tbCanCreate = CanCreateMappingRelationshipShape");

        
        #line default
        #line hidden
        
        #line 455 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 455 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(info);\r\n");

        
        #line default
        #line hidden
        
        #line 456 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

					}
				}
			}
		}

        
        #line default
        #line hidden
        
        #line 462 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	}

        
        #line default
        #line hidden
        
        #line 464 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"
			if( !bCanCreate )
			{
				foreach(DslEditorViewDiagrams::DiagramSurfaceViewModel vm in this.IncludedSurfaceViewModels)
				{
					if( vm.CanCreateRelationship(info) )
						return true;
				}
			}

            return bCanCreate;
        }

");

        
        #line default
        #line hidden
        
        #line 478 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	foreach (PresentationElementClass element in diagramClass.PresentationElements)
	{
		if( element is RelationshipShapeClass )
		{
			RelationshipShapeClass rsShape = element as RelationshipShapeClass;
			DomainRelationship con = rsShape.ReferenceRelationship;
			if( con != null )
			{

        
        #line default
        #line hidden
        
        #line 487 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t/// <summary>\r\n        /// Verifies if a relationship shape of type ");

        
        #line default
        #line hidden
        
        #line 489 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 489 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@" can be created based on the given data.
        /// </summary>
        /// <param name=""info"">Info specifying the relationship to create.</param>
        /// <returns>True if a relationship can be created. False otherwise.</returns>
		protected virtual bool CanCreateRelationshipShape");

        
        #line default
        #line hidden
        
        #line 493 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 493 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(DslEditorViewDiagrams::ViewModelRelationshipCreationInfo info)\r\n\t\t{\r\n\t\t\tif( info" +
        ".Source.Element is ");

        
        #line default
        #line hidden
        
        #line 495 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Source.RolePlayer.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 495 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" && info.Target.Element is ");

        
        #line default
        #line hidden
        
        #line 495 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Target.RolePlayer.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 495 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" )\r\n\t\t\t{\r\n");

        
        #line default
        #line hidden
        
        #line 497 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				// see if we can add relationship without breaking cardinality constraints
				if(con.Target.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.One || con.Target.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.ZeroOne )
				{

        
        #line default
        #line hidden
        
        #line 501 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\tSystem.Collections.ObjectModel.ReadOnlyCollection<");

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("> allM");

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Name));

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances1 =  DslModeling::DomainRoleInfo.GetElementLinks<");

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(">(info.Target.Element, ");

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Target.Name));

        
        #line default
        #line hidden
        
        #line 502 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("DomainRoleId);\r\n\t\t\t\tif(allM");

        
        #line default
        #line hidden
        
        #line 503 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Name));

        
        #line default
        #line hidden
        
        #line 503 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances1.Count > 0 )\r\n\t\t\t\t\treturn false;\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 506 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				}
				/*if(con.Source.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.One || con.Source.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.ZeroOne )
				{

        
        #line default
        #line hidden
        
        #line 510 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\tSystem.Collections.ObjectModel.ReadOnlyCollection<");

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("> allM");

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Name));

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances2 =  DslModeling::DomainRoleInfo.GetElementLinks<");

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(">(info.Source.Element, ");

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Source.Name));

        
        #line default
        #line hidden
        
        #line 511 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("DomainRoleId);\r\n\t\t\t\tif(allM");

        
        #line default
        #line hidden
        
        #line 512 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Name));

        
        #line default
        #line hidden
        
        #line 512 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances2.Count > 0 )\r\n\t\t\t\t\treturn false;\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 515 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				}
				*/
				if( !con.AllowsDuplicates )
				{

        
        #line default
        #line hidden
        
        #line 520 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\t// see if a relationship already exists (can not create new one of the same t" +
        "ype as no duplicates are allowed)\r\n\t\t\t\tif( ");

        
        #line default
        #line hidden
        
        #line 522 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 522 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".GetLinks(info.Source.Element as ");

        
        #line default
        #line hidden
        
        #line 522 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Source.RolePlayer.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 522 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(", info.Target.Element as ");

        
        #line default
        #line hidden
        
        #line 522 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Target.RolePlayer.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 522 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(").Count > 0 )\r\n\t\t\t\t\treturn false;\r\n");

        
        #line default
        #line hidden
        
        #line 524 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				}

        
        #line default
        #line hidden
        
        #line 526 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n");

        
        #line default
        #line hidden
        
        #line 534 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			}
		}
		else if( element is MappingRelationshipShapeClass )
		{
			MappingRelationshipShapeClass rsShape = element as MappingRelationshipShapeClass;
			if( rsShape.DomainClass != null )
			{
			
				ReferenceRelationship conSource = rsShape.Source;
				ReferenceRelationship conTarget = rsShape.Target;
				if( conSource != null && conTarget != null )
				{
					DomainClass source = conSource.Target.RolePlayer as DomainClass;
					DomainClass target = conTarget.Target.RolePlayer as DomainClass;
					if( source != null && target != null )
					{

        
        #line default
        #line hidden
        
        #line 551 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t/// <summary>\r\n        /// Verifies if a mapping relationship of type ");

        
        #line default
        #line hidden
        
        #line 553 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 553 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@" can be created based on the given data.
        /// </summary>
        /// <param name=""info"">Info specifying the relationship to create.</param>
        /// <returns>True if a relationship can be created. False otherwise.</returns>
		protected virtual bool CanCreateMappingRelationshipShape");

        
        #line default
        #line hidden
        
        #line 557 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 557 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(DslEditorViewDiagrams::ViewModelRelationshipCreationInfo info)\r\n\t\t{\r\n\t\t\tif( info" +
        ".Source.Element is ");

        
        #line default
        #line hidden
        
        #line 559 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(source.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 559 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" && info.Target.Element is ");

        
        #line default
        #line hidden
        
        #line 559 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(target.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 559 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" )\r\n\t\t\t{\r\n");

        
        #line default
        #line hidden
        
        #line 561 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

					// see if we can add new element + relationships without breaking cardinality constraints
					if(conSource.Target.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.One || conSource.Target.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.ZeroOne )
					{

        
        #line default
        #line hidden
        
        #line 565 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\tSystem.Collections.ObjectModel.ReadOnlyCollection<");

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("> allM");

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.Name));

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances1 =  DslModeling::DomainRoleInfo.GetElementLinks<");

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(">(info.Source.Element, ");

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.Target.Name));

        
        #line default
        #line hidden
        
        #line 566 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("DomainRoleId);\r\n\t\t\t\tif(allM");

        
        #line default
        #line hidden
        
        #line 567 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.Name));

        
        #line default
        #line hidden
        
        #line 567 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances1.Count > 0 )\r\n\t\t\t\t\treturn false;\r\n");

        
        #line default
        #line hidden
        
        #line 569 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

					}
					if(conTarget.Target.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.One || conTarget.Target.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.ZeroOne )
					{

        
        #line default
        #line hidden
        
        #line 573 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\tSystem.Collections.ObjectModel.ReadOnlyCollection<");

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("> allM");

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.Name));

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances2 =  DslModeling::DomainRoleInfo.GetElementLinks<");

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(">(info.Target.Element, ");

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.Target.Name));

        
        #line default
        #line hidden
        
        #line 574 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("DomainRoleId);\r\n\t\t\t\tif(allM");

        
        #line default
        #line hidden
        
        #line 575 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.Name));

        
        #line default
        #line hidden
        
        #line 575 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("Instances2.Count > 0 )\r\n\t\t\t\t\treturn false;\r\n");

        
        #line default
        #line hidden
        
        #line 577 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

					}

        
        #line default
        #line hidden
        
        #line 579 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n");

        
        #line default
        #line hidden
        
        #line 587 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

					}
				}
			}
		}

        
        #line default
        #line hidden
        
        #line 593 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	}

        
        #line default
        #line hidden
        
        #line 595 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\r\n        /// <summary>\r\n        /// Creates a relationship based on the given da" +
        "ta.\r\n        /// </summary>\r\n        /// <param name=\"info\">Info specifying the " +
        "relationship to create.</param>\r\n        public override void CreateRelationship" +
        "(DslEditorViewDiagrams::ViewModelRelationshipCreationInfo info)\r\n\t\t{\r\n\t\t\tif( inf" +
        "o.Source == null || info.Target == null )\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\tif( info.Source" +
        ".ShapeElement == null || info.Target.ShapeElement == null )\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n" +
        "\t\t\tif( info.Source.ShapeElement.Element == null || info.Target.ShapeElement.Elem" +
        "ent == null )\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\tif (!info.Source.ShapeElement.TakesPartInRe" +
        "lationship)\r\n                return;\r\n\r\n\t\t\t// gather creatable shapes\r\n\t\t\tSystem" +
        ".Collections.Generic.List<DslEditorSelection::SearchRSType.SearchRSTypeStruct> s" +
        "hapesPossible = this.GetCreatableRelationships(info);\r\n\t\t\tSystem.Guid shapeToCre" +
        "ate = System.Guid.Empty;\r\n\r\n\t\t\tif( shapesPossible.Count == 0 )\r\n\t\t\t\treturn;\r\n\t\t\t" +
        "else if (shapesPossible.Count == 1)\r\n                shapeToCreate = shapesPossi" +
        "ble[0].DomainClassId;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// let user choose what shape type he " +
        "wants to create\r\n\t\t\t\tDslEditorSelection::SelectGenericViewModel<DslEditorSelecti" +
        "on::SearchRSType.SearchRSTypeStruct> selectionViewModel\r\n                       " +
        "     = new DslEditorSelection.SelectGenericViewModel<DslEditorSelection::SearchR" +
        "SType.SearchRSTypeStruct>(\r\n                                this.ViewModelStore," +
        " shapesPossible,\r\n                                new DslEditorSelection.Generic" +
        "SearchDelegate<DslEditorSelection::SearchRSType.SearchRSTypeStruct>(DslEditorSel" +
        "ection::SearchRSType.Search),\r\n                                new DslEditorSele" +
        "ction.GenericSortDelegate<DslEditorSelection::SearchRSType.SearchRSTypeStruct>(D" +
        "slEditorSelection::SearchRSType.Sort));\r\n\r\n                // show dialog\r\n     " +
        "           bool? result = this.GlobalServiceProvider.Resolve<DslEditorServices::" +
        "IUIVisualizerService>().ShowDialog(\"SelectRSTypePopup\", selectionViewModel);\r\n  " +
        "              if (result == true && selectionViewModel.SelectedElement != null)\r" +
        "\n                {\r\n                    shapeToCreate = selectionViewModel.Selec" +
        "tedElement.Value.DomainClassId;\r\n                }\r\n\r\n                selectionV" +
        "iewModel.Dispose();\r\n                System.GC.Collect();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( sha" +
        "peToCreate == System.Guid.Empty )\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\tthis.CreateRelationship" +
        "(info, shapeToCreate);\r\n\t\t\t\r\n\t\t\t\r\n        }\r\n\r\n        /// <summary>\r\n        //" +
        "/ Creates a relationship based on the given data.\r\n        /// </summary>\r\n     " +
        "   /// <param name=\"info\">Info specifying the relationship to create.</param>\r\n " +
        "       /// <param name=\"shapeToCreate\">Type of the relationship shape</param>\r\n " +
        "       public override void CreateRelationship(DslEditorViewDiagrams::ViewModelR" +
        "elationshipCreationInfo info, System.Guid shapeToCreate)\r\n        {\r\n");

        
        #line default
        #line hidden
        
        #line 658 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	foreach (PresentationElementClass element in diagramClass.PresentationElements)
	{
		if( element is RelationshipShapeClass )
		{
			RelationshipShapeClass rsShape = element as RelationshipShapeClass;
			DomainRelationship con = rsShape.ReferenceRelationship;
			if( con != null )
			{

        
        #line default
        #line hidden
        
        #line 667 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\tif( shapeToCreate == ");

        
        #line default
        #line hidden
        
        #line 668 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 668 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".DomainClassId)\r\n\t\t\t{\r\n\t\t\t\tusing(DslModeling::Transaction transaction = this.Stor" +
        "e.TransactionManager.BeginTransaction(\"Add global::Tum.VModellXT.Dynamik.Ueberga" +
        "ngShape \") )\r\n\t\t\t\t{\r\n");

        
        #line default
        #line hidden
        
        #line 672 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				if(con.Source.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.One || con.Source.Multiplicity == Tum.PDE.LanguageDSL.Multiplicity.ZeroOne )
				{

        
        #line default
        #line hidden
        
        #line 675 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\t\tSystem.Collections.ObjectModel.ReadOnlyCollection<");

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("> allInstances =  DslModeling::DomainRoleInfo.GetElementLinks<");

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(">(info.Source.Element, ");

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.Source.Name));

        
        #line default
        #line hidden
        
        #line 676 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("DomainRoleId);\r\n\t\t\t\t\tif(allInstances.Count > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tallInstances[0].D" +
        "elete();\r\n\t\t\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 681 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				}				

        
        #line default
        #line hidden
        
        #line 683 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\r\n\t\t\t\t\tCreateRelationship<");

        
        #line default
        #line hidden
        
        #line 685 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 685 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(">(info.Source.ShapeElement.Element, info.Target.ShapeElement.Element);\r\n\t\t\t\t\t\r\n\t\t" +
        "\t\t\ttransaction.Commit();\r\n\t\t\t\t}\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 690 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			}
		}
		else if( element is MappingRelationshipShapeClass )
		{
			MappingRelationshipShapeClass rsShape = element as MappingRelationshipShapeClass;
			if( rsShape.DomainClass != null )
			{
				DomainClass domainClass = rsShape.DomainClass;
				ReferenceRelationship conSource = rsShape.Source;
				ReferenceRelationship conTarget = rsShape.Target;
				if( conSource != null && conTarget != null )
				{
					DomainClass source = conSource.Target.RolePlayer as DomainClass;
					DomainClass target = conTarget.Target.RolePlayer as DomainClass;
					if( source != null && target != null )
					{

        
        #line default
        #line hidden
        
        #line 707 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\r\n\t\t\tif( shapeToCreate == ");

        
        #line default
        #line hidden
        
        #line 709 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 709 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".DomainClassId)\r\n\t\t\t{\r\n\t\t\t\tusing(DslModeling::Transaction transaction = this.Stor" +
        "e.TransactionManager.BeginTransaction(\"Add global::Tum.VModellXT.Dynamik.Ueberga" +
        "ngShape \") )\r\n\t\t\t\t{\r\n\t\t\t\t\t");

        
        #line default
        #line hidden
        
        #line 713 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 713 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" linkElement = new ");

        
        #line default
        #line hidden
        
        #line 713 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 713 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(this.Store);\r\n\t\t\t\t\tnew ");

        
        #line default
        #line hidden
        
        #line 714 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conSource.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 714 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(linkElement, info.Source.Element as ");

        
        #line default
        #line hidden
        
        #line 714 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(source.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 714 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(");\r\n\t\t\t\t\tnew ");

        
        #line default
        #line hidden
        
        #line 715 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(conTarget.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 715 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(linkElement, info.Target.Element as ");

        
        #line default
        #line hidden
        
        #line 715 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(target.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 715 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(");\t\t\t\t\t\r\n\r\n\t\t\t\t\tDslModeling::ModelElement modelElementParent = EmbedElement(linkE" +
        "lement);\r\n\t\t\t\t\tif( modelElementParent == null )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttransaction.Rollb" +
        "ack();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (");

        
        #line default
        #line hidden
        
        #line 724 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 724 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ElementNameProvider.Instance.HasName(linkElement))\r\n    \t\t\t\t\t\t");

        
        #line default
        #line hidden
        
        #line 725 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 725 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("ElementNameProvider.Instance.CreateAndAssignName(modelElementParent, linkElement)" +
        ";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\ttransaction.Commit();\r\n\t\t\t\t}\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 732 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

					}
				}
			}
		}

        
        #line default
        #line hidden
        
        #line 738 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	}

        
        #line default
        #line hidden
        
        #line 740 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"
			foreach(DslEditorViewDiagrams::DiagramSurfaceViewModel vm in this.IncludedSurfaceViewModels)
			{
				vm.CreateRelationship(info, shapeToCreate);
			}
        }
		
        /// <summary>
        /// Gets creatable relationship shapes.
        /// </summary>
        /// <param name=""info"">Info specifying the relationship to create.</param>
        public override System.Collections.Generic.List<DslEditorSelection::SearchRSType.SearchRSTypeStruct> GetCreatableRelationships(DslEditorViewDiagrams::ViewModelRelationshipCreationInfo info)
        {
			System.Collections.Generic.List<DslEditorSelection::SearchRSType.SearchRSTypeStruct> shapesPossible = base.GetCreatableRelationships(info);
			
");

        
        #line default
        #line hidden
        
        #line 756 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

	foreach (PresentationElementClass element in diagramClass.PresentationElements)
	{
		if( element is RelationshipShapeClass )
		{
			RelationshipShapeClass rsShape = element as RelationshipShapeClass;
			DomainRelationship con = rsShape.ReferenceRelationship;
			if( con != null )
			{

        
        #line default
        #line hidden
        
        #line 765 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\tif( CanCreateRelationshipShape");

        
        #line default
        #line hidden
        
        #line 766 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 766 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(info) )\r\n\t\t\t{\r\n\t\t\t\tshapesPossible.Add(new DslEditorSelection::SearchRSType.Searc" +
        "hRSTypeStruct(\r\n\t\t\t\t\t");

        
        #line default
        #line hidden
        
        #line 769 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 769 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".DomainClassId, \"");

        
        #line default
        #line hidden
        
        #line 769 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(con.DisplayName));

        
        #line default
        #line hidden
        
        #line 769 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 769 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.DisplayName));

        
        #line default
        #line hidden
        
        #line 769 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\"));\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 771 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			}
		}
		else if( element is MappingRelationshipShapeClass )
		{
			MappingRelationshipShapeClass rsShape = element as MappingRelationshipShapeClass;
			if( rsShape.DomainClass != null )
			{
				DomainClass domainClass = rsShape.DomainClass;
				ReferenceRelationship conSource = rsShape.Source;
				ReferenceRelationship conTarget = rsShape.Target;
				if( conSource != null && conTarget != null )
				{
					DomainClass source = conSource.Target.RolePlayer as DomainClass;
					DomainClass target = conTarget.Target.RolePlayer as DomainClass;
					if( source != null && target != null )
					{

        
        #line default
        #line hidden
        
        #line 788 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\r\n\t\t\tif( CanCreateMappingRelationshipShape");

        
        #line default
        #line hidden
        
        #line 790 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.Name));

        
        #line default
        #line hidden
        
        #line 790 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(info) )\r\n\t\t\t{\r\n\t\t\t\tshapesPossible.Add(new DslEditorSelection::SearchRSType.Searc" +
        "hRSTypeStruct(\r\n\t\t\t\t\t");

        
        #line default
        #line hidden
        
        #line 793 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 793 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".DomainClassId, \"");

        
        #line default
        #line hidden
        
        #line 793 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.DisplayName));

        
        #line default
        #line hidden
        
        #line 793 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 793 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(rsShape.DisplayName));

        
        #line default
        #line hidden
        
        #line 793 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\"));\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 795 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
				
					}
				}
			}
		}
	}

        
        #line default
        #line hidden
        
        #line 801 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"
			foreach(DslEditorViewDiagrams::DiagramSurfaceViewModel vm in this.IncludedSurfaceViewModels)
			{
				shapesPossible.AddRange(vm.GetCreatableRelationships(info));
			}
			
            return shapesPossible;
        }		
        #endregion		

		#region Classes Embedding Methods
");

        
        #line default
        #line hidden
        
        #line 813 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		List<PresentationElementClass> requireCustomEmbedMethods = new List<PresentationElementClass>();
		foreach (PresentationElementClass element in diagramClass.PresentationElements)
		{
			if( element is MappingRelationshipShapeClass )
			{
				MappingRelationshipShapeClass shape = element as MappingRelationshipShapeClass;
				DomainClass domainClass = shape.DomainClass;
				if( domainClass == null )
					continue;
				
				requireCustomEmbedMethods.Add(element);
			}
			else if( element is ShapeClass )
			{
				ShapeClass shapeClass = element as ShapeClass;
				DomainClass domainClass = shapeClass.DomainClass;
				if( domainClass == null )
					continue;
				
				if( shapeClass.Parent != null )
				{
					bool bFound = false;
					foreach(EmbeddingRelationship con in embeddingChildParentMapping[domainClass] )
					{
						if( con.Source.RolePlayer == shapeClass.Parent.DomainClass )
							bFound = true;
					}
					
					if( !bFound )
					{
						requireCustomEmbedMethods.Add(element);

						continue;
					}
				}
			}

		}
		
		if( requireCustomEmbedMethods.Count > 0 )
		{

        
        #line default
        #line hidden
        
        #line 855 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"
        /// <summary>
        /// Tries to embed an element as the child of the selected element.
        /// </summary>
        /// <param name=""modelElement"">Model element to embed.</param>
        /// <returns>Parent model element the child was embedded at on success. Null otherwise.</returns>
        public override DslEditorModeling::DomainModelElement EmbedElement(DslEditorModeling::DomainModelElement modelElement)
        {
");

        
        #line default
        #line hidden
        
        #line 864 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			foreach (PresentationElementClass element in requireCustomEmbedMethods)
			{
				if( element is MappingRelationshipShapeClass )
				{
					MappingRelationshipShapeClass shape = element as MappingRelationshipShapeClass;
					DomainClass domainClass = shape.DomainClass;

        
        #line default
        #line hidden
        
        #line 871 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\tif( modelElement.GetDomainClassId() == ");

        
        #line default
        #line hidden
        
        #line 872 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 872 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".DomainClassId )\r\n\t\t\t\treturn Embed");

        
        #line default
        #line hidden
        
        #line 873 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.Name));

        
        #line default
        #line hidden
        
        #line 873 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("For");

        
        #line default
        #line hidden
        
        #line 873 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shape.Name));

        
        #line default
        #line hidden
        
        #line 873 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(modelElement as ");

        
        #line default
        #line hidden
        
        #line 873 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 873 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(");\r\n");

        
        #line default
        #line hidden
        
        #line 874 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

				}
				else if( element is ShapeClass )
				{
					ShapeClass shapeClass = element as ShapeClass;
					DomainClass domainClass = shapeClass.DomainClass;

        
        #line default
        #line hidden
        
        #line 880 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\tif( modelElement.GetDomainClassId() == ");

        
        #line default
        #line hidden
        
        #line 881 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 881 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(".DomainClassId )\r\n\t\t\t\treturn Embed");

        
        #line default
        #line hidden
        
        #line 882 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.Name));

        
        #line default
        #line hidden
        
        #line 882 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("For");

        
        #line default
        #line hidden
        
        #line 882 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.Name));

        
        #line default
        #line hidden
        
        #line 882 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(modelElement as ");

        
        #line default
        #line hidden
        
        #line 882 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 882 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(");\r\n");

        
        #line default
        #line hidden
        
        #line 883 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
					
				}

			}

        
        #line default
        #line hidden
        
        #line 887 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\r\n\t\t\treturn base.EmbedElement(modelElement);\r\n\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 891 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}
		
		foreach (PresentationElementClass element in requireCustomEmbedMethods)
		{
			if( element is MappingRelationshipShapeClass )
			{
				MappingRelationshipShapeClass shape = element as MappingRelationshipShapeClass;
				DomainClass domainClass = shape.DomainClass;

        
        #line default
        #line hidden
        
        #line 900 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"
		/// <summary>
        /// Attempts to embedd the given element at its specific parent. If it fails, null is returned.
        /// </summary>
        /// <param name=""linkElement"">Element to embed.</param>
        /// <returns>Parent element on success. Null on failure.</returns>
		protected abstract DslEditorModeling::DomainModelElement Embed");

        
        #line default
        #line hidden
        
        #line 907 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.Name));

        
        #line default
        #line hidden
        
        #line 907 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("For");

        
        #line default
        #line hidden
        
        #line 907 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shape.Name));

        
        #line default
        #line hidden
        
        #line 907 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(");

        
        #line default
        #line hidden
        
        #line 907 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 907 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" linkElement);\r\n");

        
        #line default
        #line hidden
        
        #line 908 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			}

		
			else if( element is ShapeClass )
			{
				ShapeClass shapeClass = element as ShapeClass;
				DomainClass domainClass = shapeClass.DomainClass;

        
        #line default
        #line hidden
        
        #line 916 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(@"
		/// <summary>
        /// Attempts to embedd the given element at its specific parent. If it fails, null is returned.
        /// </summary>
        /// <param name=""info"">Creation info.</param>
        /// <param name=""linkElement"">Element to embed.</param>
        /// <returns>Parent element on success. Null on failure.</returns>
		protected abstract DslEditorModeling::DomainModelElement Embed");

        
        #line default
        #line hidden
        
        #line 924 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.Name));

        
        #line default
        #line hidden
        
        #line 924 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("For");

        
        #line default
        #line hidden
        
        #line 924 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.Name));

        
        #line default
        #line hidden
        
        #line 924 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("(");

        
        #line default
        #line hidden
        
        #line 924 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 924 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write(" elementToEmbed);\r\n");

        
        #line default
        #line hidden
        
        #line 925 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

			}
		}

        
        #line default
        #line hidden
        
        #line 928 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t#endregion\r\n");

        
        #line default
        #line hidden
        
        #line 930 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 932 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\r\n\t\t#region Dispose\r\n        /// <summary>\r\n        /// Clean up.\r\n        /// " +
        "</summary>\r\n        protected override void OnDispose()\r\n        {\r\n");

        
        #line default
        #line hidden
        
        #line 940 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		if( !diagramClass.IsCustom )
		{

        
        #line default
        #line hidden
        
        #line 943 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\r\n            if( parentModelContext != null )\r\n            \tparentModelContex" +
        "t.PropertyChanged -= new System.ComponentModel.PropertyChangedEventHandler(Model" +
        "Context_PropertyChanged);\r\n");

        
        #line default
        #line hidden
        
        #line 946 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 948 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"
this.Write("\t\t\t\t\t\r\n\t\t\t\t\r\n            base.OnDispose();\r\n        }\r\n        #endregion\r\n\t}\r\n\r\n" +
        "}\r\n");

        
        #line default
        #line hidden
        
        #line 956 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\DiagramViewModelGenerator.tt"

}

        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}
