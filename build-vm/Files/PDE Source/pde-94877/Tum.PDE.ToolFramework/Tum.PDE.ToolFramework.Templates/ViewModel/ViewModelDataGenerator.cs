// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 10.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace Tum.PDE.ToolFramework.Templates.ViewModel
{
    using Tum.PDE.LanguageDSL;
    using System.Collections;
    using System.Collections.Generic;
    using System.Collections.ObjectModel;
    using System.Linq;
    using System;
    
    
    #line 1 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
    [System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "10.0.0.0")]
    public partial class ViewModelDataGenerator : BaseTemplate
    {
        #region ToString Helpers
        /// <summary>
        /// Utility class to produce culture-oriented representation of an object as a string.
        /// </summary>
        public class ToStringInstanceHelper
        {
            private System.IFormatProvider formatProviderField  = global::System.Globalization.CultureInfo.InvariantCulture;
            /// <summary>
            /// Gets or sets format provider to be used by ToStringWithCulture method.
            /// </summary>
            public System.IFormatProvider FormatProvider
            {
                get
                {
                    return this.formatProviderField ;
                }
                set
                {
                    if ((value != null))
                    {
                        this.formatProviderField  = value;
                    }
                }
            }
            /// <summary>
            /// This is called from the compile/run appdomain to convert objects within an expression block to a string
            /// </summary>
            public string ToStringWithCulture(object objectToConvert)
            {
                if ((objectToConvert == null))
                {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                System.Type t = objectToConvert.GetType();
                System.Reflection.MethodInfo method = t.GetMethod("ToString", new System.Type[] {
                            typeof(System.IFormatProvider)});
                if ((method == null))
                {
                    return objectToConvert.ToString();
                }
                else
                {
                    return ((string)(method.Invoke(objectToConvert, new object[] {
                                this.formatProviderField })));
                }
            }
        }
        private ToStringInstanceHelper toStringHelperField = new ToStringInstanceHelper();
        public ToStringInstanceHelper ToStringHelper
        {
            get
            {
                return this.toStringHelperField;
            }
        }
        #endregion
        public override string TransformText()
        {
            this.GenerationEnvironment = null;
            this.Write(" \r\n");
            this.Write(@"using DslModeling = global::Microsoft.VisualStudio.Modeling;
using DslEditorModeling = global::Tum.PDE.ToolFramework.Modeling;
using DslEditorDiagrams = global::Tum.PDE.ToolFramework.Modeling.Diagrams;
using DslEditorViewModel = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel;
using DslEditorViewModelData = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Data;
using DslEditorViewDiagrams = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.DiagramSurface;
using DslEditorViewModelModelTree = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.ModelTree;
using DslEditorViewModelPropertyGrid = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.PropertyGrid;
using DslEditorViewModelDependencies = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Dependencies;
using DslEditorViewModelServices = global::Tum.PDE.ToolFramework.Modeling.Visualization.ViewModel.Services;
 
using ");
            
            #line 19 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.MetaModel.Namespace));
            
            #line default
            #line hidden
            this.Write(".ViewModel.ModelTree;\r\nusing ");
            
            #line 20 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.MetaModel.Namespace));
            
            #line default
            #line hidden
            this.Write(".ViewModel.PropertyGrid;\r\n\r\n");
            
            #line 22 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

GenerateViewModelData(this.MetaModel);

            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        #line 25 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
 
public void GenerateViewModelData(MetaModel dm)
{
	List<AttributedDomainElement> allDomainElementsUnsorted = new List<AttributedDomainElement>();
	allDomainElementsUnsorted.AddRange(dm.AllClasses);
	allDomainElementsUnsorted.AddRange(dm.AllRelationships);
	IEnumerable allDomainElements = CodeGenerationUtilities.SortDomainClassesByInheritance(allDomainElementsUnsorted);	
	
	bool bFirstIf = true;

        
        #line default
        #line hidden
        
        #line 34 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("namespace ");

        
        #line default
        #line hidden
        
        #line 35 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Namespace));

        
        #line default
        #line hidden
        
        #line 35 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel\r\n{\r\n\t/// <summary>\r\n\t/// This class represents the view model store of" +
        " ");

        
        #line default
        #line hidden
        
        #line 38 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.ApplicationName));

        
        #line default
        #line hidden
        
        #line 38 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".\r\n\t/// \r\n\t/// Double-derived class to allow easier code customization.\r\n\t/// </s" +
        "ummary>\r\n\tpublic partial class ");

        
        #line default
        #line hidden
        
        #line 42 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 42 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStore : ");

        
        #line default
        #line hidden
        
        #line 42 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 42 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStoreBase\r\n\t{\r\n\t\t#region Constructor\r\n\t\t/// <summary>\r\n        /// Const" +
        "ructor.\r\n        /// </summary>\r\n        /// <param name=\"modelData\">Document da" +
        "ta.</param>\r\n        public ");

        
        #line default
        #line hidden
        
        #line 49 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 49 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStore(DslEditorModeling::ModelData modelData)\r\n            : this(modelD" +
        "ata, true)\r\n        {\r\n\r\n        }\r\n\t\t\r\n");

        
        #line default
        #line hidden
        
        #line 55 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		if( dm.LanguageType == LanguageType.WPFEditor || dm.LanguageType == LanguageType.VMXEditor)
		{

        
        #line default
        #line hidden
        
        #line 58 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\r\n\t\t/// <summary>\r\n        /// Constructor.\r\n        /// </summary>\r\n        ///" +
        " <param name=\"modelData\">Document data.</param>\r\n        /// <param name=\"option" +
        "s\">Options.</param>\r\n        public ");

        
        #line default
        #line hidden
        
        #line 64 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 64 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStore(DslEditorModeling::ModelData modelData, Tum.PDE.ToolFramework.Mode" +
        "ling.Visualization.Base.ViewModelOptions options)\r\n            : base(modelData," +
        " options)\r\n        {\r\n\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 68 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 70 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\r\n\t\t/// <summary>\r\n        /// Constructor.\r\n        /// </summary>\r\n        //" +
        "/ <param name=\"modelData\">Document data.</param>\r\n\t\t/// <param name=\"bHookUpEven" +
        "ts\">True if events listeners should be initialized.</param>\r\n        public ");

        
        #line default
        #line hidden
        
        #line 77 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 77 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"ViewModelStore(DslEditorModeling::ModelData modelData, bool bHookUpEvents)
            : this(modelData, bHookUpEvents, null)
        {

        }		
		
		/// <summary>
        /// Constructor.
        /// </summary>
        /// <param name=""modelData"">Document data.</param>
		/// <param name=""bHookUpEvents"">True if events listeners should be initialized.</param>
		/// <param name=""ownedByStore"">Store owning this store.</param>
        public ");

        
        #line default
        #line hidden
        
        #line 89 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 89 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"ViewModelStore(DslEditorModeling::ModelData modelData, bool bHookUpEvents, DslEditorViewModelData::ViewModelStore ownedByStore)
            : base(modelData, bHookUpEvents, ownedByStore)
        {
        }			
		#endregion
	}
	
	/// <summary>
	/// This class represents the view model store of ");

        
        #line default
        #line hidden
        
        #line 97 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.ApplicationName));

        
        #line default
        #line hidden
        
        #line 97 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".\r\n\t/// \r\n\t/// This is the abstract base class.\r\n\t/// </summary>\r\n\tpublic abstrac" +
        "t class ");

        
        #line default
        #line hidden
        
        #line 101 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 101 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStoreBase : DslEditorViewModelData::ViewModelStore\r\n\t{\r\n\t\t#region Constr" +
        "uctor\r\n");

        
        #line default
        #line hidden
        
        #line 104 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		if( dm.LanguageType == LanguageType.WPFEditor || dm.LanguageType == LanguageType.VMXEditor)
		{

        
        #line default
        #line hidden
        
        #line 107 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"			
		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""modelData"">Document data.</param>
		/// <param name=""bHookUpEvents"">True if events listeners should be initialized.</param>
		/// <param name=""options"">Options.</param>
        protected ");

        
        #line default
        #line hidden
        
        #line 114 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 114 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"ViewModelStoreBase(DslEditorModeling::ModelData modelData, Tum.PDE.ToolFramework.Modeling.Visualization.Base.ViewModelOptions options)
            : base(modelData, true, null)
        {
			this.Options = options;
			if( this.Options == null )
				this.Options = new ");

        
        #line default
        #line hidden
        
        #line 119 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 119 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelOptions();\r\n        }\r\n");

        
        #line default
        #line hidden
        
        #line 121 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 123 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\t\r\n\t\t\r\n\t\t/// <summary>\r\n        /// Constuctor.\r\n        /// </summary>\r\n      " +
        "  /// <param name=\"modelData\">Document data.</param>\r\n\t\t/// <param name=\"bHookUp" +
        "Events\">True if events listeners should be initialized.</param>\r\n        protect" +
        "ed ");

        
        #line default
        #line hidden
        
        #line 130 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 130 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"ViewModelStoreBase(DslEditorModeling::ModelData modelData, bool bHookUpEvents)
            : this(modelData, bHookUpEvents, null)
        {
        }		
		
		/// <summary>
        /// Constuctor.
        /// </summary>
        /// <param name=""modelData"">Document data.</param>
		/// <param name=""bHookUpEvents"">True if events listeners should be initialized.</param>
		/// <param name=""ownedByStore"">Store owning this store.</param>
        protected ");

        
        #line default
        #line hidden
        
        #line 141 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 141 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStoreBase(DslEditorModeling::ModelData modelData, bool bHookUpEvents, Ds" +
        "lEditorViewModelData::ViewModelStore ownedByStore)\r\n            : base(modelData" +
        ", bHookUpEvents, ownedByStore)\r\n        {\r\n");

        
        #line default
        #line hidden
        
        #line 144 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		if( dm.LanguageType == LanguageType.WPFEditor || dm.LanguageType == LanguageType.VMXEditor)
		{

        
        #line default
        #line hidden
        
        #line 147 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\t\r\n\t\t\tthis.Options = new ");

        
        #line default
        #line hidden
        
        #line 148 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 148 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelOptions();\r\n");

        
        #line default
        #line hidden
        
        #line 149 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 151 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"			
        }		
		#endregion
		
		#region Initialization
        private DslEditorViewModelData::ViewModelStore GetExternViewModelStore(DslEditorViewModelData::ViewModelStore st, System.Type type)
        {
            foreach (DslEditorViewModelData::ViewModelStore s in st.ExternStores)
                if( s.GetType() == type )
                    return s;

            return null;
        }
		
        /// <summary>
        /// Register extern stores.
        /// </summary>
        protected override void RegisterExternStores()
		{
");

        
        #line default
        #line hidden
        
        #line 170 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		int counter = 0;
		foreach(MetaModelLibrary lib in dm.MetaModelLibraries)
		{
			if( lib.ImportedLibrary == null )
				continue;
			
			MetaModel m = (lib.ImportedLibrary as MetaModel);

        
        #line default
        #line hidden
        
        #line 178 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tDslEditorViewModelData::ViewModelStore v");

        
        #line default
        #line hidden
        
        #line 179 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(counter));

        
        #line default
        #line hidden
        
        #line 179 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(" = GetExternViewModelStore(this.TopMostStore, typeof(");

        
        #line default
        #line hidden
        
        #line 179 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(m.Namespace));

        
        #line default
        #line hidden
        
        #line 179 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 179 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(m.Name));

        
        #line default
        #line hidden
        
        #line 179 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStore));\r\n\t\t\tif( v");

        
        #line default
        #line hidden
        
        #line 180 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(counter));

        
        #line default
        #line hidden
        
        #line 180 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(" == null )\r\n\t\t\t\tv");

        
        #line default
        #line hidden
        
        #line 181 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(counter));

        
        #line default
        #line hidden
        
        #line 181 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(" = new ");

        
        #line default
        #line hidden
        
        #line 181 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(m.Namespace));

        
        #line default
        #line hidden
        
        #line 181 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 181 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(m.Name));

        
        #line default
        #line hidden
        
        #line 181 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelStore(this.ModelData, true, this);\r\n\t\t\tthis.ExternStores.Add(v");

        
        #line default
        #line hidden
        
        #line 182 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(counter));

        
        #line default
        #line hidden
        
        #line 182 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(");\r\n\t\t\t\r\n");

        
        #line default
        #line hidden
        
        #line 184 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

			counter++;
		}

        
        #line default
        #line hidden
        
        #line 187 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"		}
		
        /// <summary>
        /// Gets the view model factory which provides methods for the creation of view models for model elements from the model.
        /// </summary>
        public override DslEditorViewModelData::ViewModelFactory Factory 
		{ 
			get
			{
				return new ");

        
        #line default
        #line hidden
        
        #line 197 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 197 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"ViewModelFactory(this);
			}
		}
		#endregion
		
		#region Methods
		/// <summary>
        /// Called to load options when the application starts.
        /// </summary>
        public override void LoadOptions(DslEditorViewModelServices::IMessageBoxService messageBox)
        {
");

        
        #line default
        #line hidden
        
        #line 208 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		if( dm.LanguageType == LanguageType.WPFEditor || dm.LanguageType == LanguageType.VMXEditor)
		{

        
        #line default
        #line hidden
        
        #line 211 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tthis.Options = new ");

        
        #line default
        #line hidden
        
        #line 212 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 212 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelOptions();\r\n\t\t\t\r\n\t\t\ttry\r\n\t\t\t{\r\n            \tstring directory = this.Mode" +
        "lData.GetDomainModelServices().ModelDataOptions.AppDataDirectory;\r\n\t\t\t\tstring pa" +
        "th = directory + System.IO.Path.DirectorySeparatorChar + ");

        
        #line default
        #line hidden
        
        #line 217 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 217 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelOptions.OptionsFileName;\r\n\t\t\t\tthis.Options.Deserialize(path);\r\n\t\t\t}\r\n\t\t\t" +
        "catch(System.Exception ex)\r\n\t\t\t{\r\n\t\t\t\tmessageBox.ShowError(\"Couldn\'t open option" +
        "s: \" + ex.Message);\r\n\t\t\t\t\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 225 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 227 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t}\r\n\t\t\r\n        /// <summary>\r\n        /// Called to save options when the appli" +
        "cation exits.\r\n        /// </summary>\r\n        public override void SaveOptions(" +
        "DslEditorViewModelServices::IMessageBoxService messageBox)\r\n        {\r\n");

        
        #line default
        #line hidden
        
        #line 235 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		if( dm.LanguageType == LanguageType.WPFEditor || dm.LanguageType == LanguageType.VMXEditor)
		{

        
        #line default
        #line hidden
        
        #line 238 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\r\n\t\t\t// save options\r\n\t\t\ttry\r\n\t\t\t{\r\n            \tstring directory = this.ModelD" +
        "ata.GetDomainModelServices().ModelDataOptions.AppDataDirectory;\r\n\t\t\t\tstring path" +
        " = directory + System.IO.Path.DirectorySeparatorChar + ");

        
        #line default
        #line hidden
        
        #line 243 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 243 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelOptions.OptionsFileName;\r\n\t\t\t\tthis.Options.Serialize(path);\r\n\t\t\t}\r\n\t\t\tca" +
        "tch(System.Exception ex)\r\n\t\t\t{\r\n\t\t\t\tmessageBox.ShowError(\"Couldn\'t save options:" +
        " \" + ex.Message);\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 250 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 252 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\r\n\t\t}\r\n\t\t#endregion\r\n\t}\r\n\t\r\n\t/// <summary>\r\n\t/// This class represents the view" +
        " model factory of ");

        
        #line default
        #line hidden
        
        #line 258 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.ApplicationName));

        
        #line default
        #line hidden
        
        #line 258 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".\r\n\t/// \r\n\t/// Double-derived class to allow easier code customization.\r\n\t/// </s" +
        "ummary>\r\n\tpublic partial class ");

        
        #line default
        #line hidden
        
        #line 262 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 262 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelFactory : ");

        
        #line default
        #line hidden
        
        #line 262 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 262 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelFactoryBase\r\n\t{\r\n\t\t#region Constructor\r\n\t\t/// <summary>\r\n        /// Con" +
        "stuctor.\r\n        /// </summary>\r\n        /// <param name=\"viewModelStore\">View " +
        "model store.</param>\r\n        public ");

        
        #line default
        #line hidden
        
        #line 269 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 269 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelFactory(DslEditorViewModelData::ViewModelStore viewModelStore)\r\n        " +
        "    : base(viewModelStore)\r\n        {\r\n        }\r\n\t\t#endregion\r\n\t}\r\n\t\r\n\t/// <sum" +
        "mary>\r\n\t/// This class represents the view model factory of ");

        
        #line default
        #line hidden
        
        #line 277 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.ApplicationName));

        
        #line default
        #line hidden
        
        #line 277 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".\r\n\t/// \r\n\t/// This is the abstract base class.\r\n\t/// </summary>\r\n\tpublic abstrac" +
        "t class ");

        
        #line default
        #line hidden
        
        #line 281 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 281 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModelFactoryBase : DslEditorViewModelData::ViewModelFactory\r\n\t{\r\n\t\t#region Co" +
        "nstructor\r\n\t\t/// <summary>\r\n        /// Constuctor.\r\n        /// </summary>\r\n   " +
        "     /// <param name=\"viewModelStore\">View model store.</param>\r\n        public " +
        "");

        
        #line default
        #line hidden
        
        #line 288 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(dm.Name));

        
        #line default
        #line hidden
        
        #line 288 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"ViewModelFactoryBase(DslEditorViewModelData::ViewModelStore viewModelStore)
            : base(viewModelStore)
        {
        }
		#endregion
		
		#region Methods
		
		#region CreateDiagramLinkViewModel
	    /// <summary>
        /// Creates the view model for the given link shape.
        /// </summary>
        /// <param name=""nodeShapeType"">Shape type for which the view model is to be created.</param>
        /// <param name=""diagram"">Diagram surface vm.</param>
        /// <param name=""nodeShape"">Link shape.</param>
        /// <returns>
        /// View model of type BaseDiagramItemLinkViewModel if a view model can be created for the given element. Null otherwise.</returns>
        public override DslEditorViewModel.DiagramSurface.BaseDiagramItemLinkViewModel CreateDiagramLinkViewModel(System.Guid nodeShapeType, DslEditorViewDiagrams::DiagramSurfaceViewModel diagram, DslEditorDiagrams::LinkShape nodeShape)
        {
");

        
        #line default
        #line hidden
        
        #line 307 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	 	ReadOnlyCollection<RelationshipShapeClass> rShapeClasses = dm.Store.ElementDirectory.FindElements<RelationshipShapeClass>();
		foreach(RelationshipShapeClass shapeClass in rShapeClasses)
		{
			if( shapeClass.ReferenceRelationship == null )
				continue;

        
        #line default
        #line hidden
        
        #line 313 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tif( nodeShapeType == ");

        
        #line default
        #line hidden
        
        #line 314 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 314 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".DomainClassId )\r\n\t\t\t\treturn new ");

        
        #line default
        #line hidden
        
        #line 315 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.GetMetaModel().Namespace));

        
        #line default
        #line hidden
        
        #line 315 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 315 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.Name));

        
        #line default
        #line hidden
        
        #line 315 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("DiagramItemLinkViewModel(this.Store, diagram, nodeShape);\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 317 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}
		
		ReadOnlyCollection<MappingRelationshipShapeClass> mapShapeClasses = dm.Store.ElementDirectory.FindElements<MappingRelationshipShapeClass>();
		foreach(MappingRelationshipShapeClass shapeClass in mapShapeClasses)
		{
			if( shapeClass.DomainClass == null || shapeClass.Source == null || shapeClass.Target == null)
				continue;

        
        #line default
        #line hidden
        
        #line 325 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tif( nodeShapeType == ");

        
        #line default
        #line hidden
        
        #line 326 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 326 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".DomainClassId )\r\n\t\t\t\treturn new ");

        
        #line default
        #line hidden
        
        #line 327 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.GetMetaModel().Namespace));

        
        #line default
        #line hidden
        
        #line 327 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 327 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.Name));

        
        #line default
        #line hidden
        
        #line 327 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("DiagramItemLinkViewModel(this.Store, diagram, nodeShape);\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 329 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 331 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"
            return null;
        }

        #endregion
		
		#region CreateDiagramItemViewModel
        /// <summary>
        /// Creates the view model for the given node shape.
        /// </summary>
        /// <param name=""nodeShapeType"">Shape type for which the view model is to be created.</param>
		/// <param name=""diagram"">Diagram surface vm.</param>
		/// <param name=""nodeShape"">Node shape.</param>
        /// <returns>
        /// View model of type DiagramItemElementViewModel if a view model can be created for the given element. Null otherwise.
		/// </returns>
        public override DslEditorViewModel.DiagramSurface.DiagramItemElementViewModel CreateDiagramItemViewModel(System.Guid nodeShapeType, DslEditorViewDiagrams::DiagramSurfaceViewModel diagram, DslEditorDiagrams::NodeShape nodeShape)
        {
");

        
        #line default
        #line hidden
        
        #line 350 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	 	ReadOnlyCollection<ShapeClass> shapeClasses = dm.Store.ElementDirectory.FindElements<ShapeClass>();
		foreach(ShapeClass shapeClass in shapeClasses)
		{
			if( shapeClass.DomainClass == null )
				continue;

        
        #line default
        #line hidden
        
        #line 356 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tif( nodeShapeType == ");

        
        #line default
        #line hidden
        
        #line 357 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 357 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".DomainClassId )\r\n\t\t\t\treturn new ");

        
        #line default
        #line hidden
        
        #line 358 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.GetMetaModel().Namespace));

        
        #line default
        #line hidden
        
        #line 358 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 358 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(shapeClass.Name));

        
        #line default
        #line hidden
        
        #line 358 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("DiagramItemViewModel(this.Store, diagram, nodeShape);\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 360 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 362 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\r\n            return null;\r\n        }\r\n\r\n        #endregion\r\n\t\t\r\n\t\t#region Create" +
        "ModelElementTreeViewModel\r\n\t\t/// <summary>\r\n        /// Creates the tree view mo" +
        "del for the given model element.\r\n        /// </summary>\r\n        /// <param nam" +
        "e=\"modelElement\">Model element for which the tree view model is to be created.</" +
        "param>\r\n        /// <param name=\"bHookUpEvents\">Hook up into model events to upd" +
        "ate the created view model on changes in model if true.</param>\r\n        /// <pa" +
        "ram name=\"bCreateContextMenus\">Creates context menus for adding and deleting mod" +
        "el elements if true.</param>\r\n\t\t/// <param name=\"mainModelTreeVm\">Main model tre" +
        "e view model.</param>\r\n        /// <returns>\r\n        /// View model of type Bas" +
        "eModelElementTreeViewModel if a view model can be created for the given element." +
        " Null otherwise.</returns>\r\n        /// <remarks>\r\n        /// A view model of t" +
        "he type BaseModelElementViewModel can obly be created for domain classes and ref" +
        "erencing relationships, that\r\n        /// can be embedded in the model tree.\r\n  " +
        "      /// </remarks>\r\n\t\t[System.Diagnostics.CodeAnalysis.SuppressMessage(\"Micros" +
        "oft.Reliability\", \"CA2000:Dispose objects before losing scope\")]\r\n        public" +
        " override DslEditorViewModelModelTree::BaseModelElementTreeViewModel CreateModel" +
        "ElementTreeViewModel(DslModeling::ModelElement modelElement, bool bHookUpEvents," +
        " bool bCreateContextMenus, DslEditorViewModel::MainModelTreeViewModel mainModelT" +
        "reeVm)\r\n\t\t{\r\n\t\t\tif( modelElement is DslEditorModeling::IDomainModelOwnable )\r\n\t\t" +
        "\t{\r\n");

        
        #line default
        #line hidden
        
        #line 388 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	    System.Collections.ObjectModel.ReadOnlyCollection<MetaModel> col =dm.Store.ElementDirectory.FindElements<MetaModel>();
		foreach(MetaModel metaModel in col)
		{

        
        #line default
        #line hidden
        
        #line 392 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\t\tif( ");

        
        #line default
        #line hidden
        
        #line 393 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 393 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("DomainModel.DomainModelId == (modelElement as DslEditorModeling::IDomainModelOwna" +
        "ble).GetDomainModelTypeId() )\r\n\t\t\t\t\treturn new ");

        
        #line default
        #line hidden
        
        #line 394 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.Namespace));

        
        #line default
        #line hidden
        
        #line 394 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.ModelTree.ModelTree");

        
        #line default
        #line hidden
        
        #line 394 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.Name));

        
        #line default
        #line hidden
        
        #line 394 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModel(this.Store, modelElement, null, System.Guid.Empty, null, bHookUpEvents," +
        " bCreateContextMenus, mainModelTreeVm); \r\n");

        
        #line default
        #line hidden
        
        #line 395 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 397 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn new DslEditorViewModelModelTree::ModelElementTreeV" +
        "iewModel(this.Store, modelElement, null, System.Guid.Empty, null, bHookUpEvents," +
        " bCreateContextMenus, mainModelTreeVm);\r\n\t\t}\r\n\t\t\r\n\t\t/// <summary>\r\n        /// C" +
        "reates the tree view model for the given model element.\r\n        /// </summary>\r" +
        "\n        /// <param name=\"element\">VModell represented by this view model.</para" +
        "m>\r\n        /// <param name=\"link\">Element link, targeting the hosted element.</" +
        "param>\r\n        /// <param name=\"domainRoleId\">Domain role id of the role that t" +
        "he hosted element belongs to.</param>\r\n        /// <param name=\"parent\">Parent o" +
        "f this view model.</param>\r\n        /// <param name=\"bHookUpEvents\">Hook up into" +
        " model events to update the created view model on changes in model if true.</par" +
        "am>\r\n        /// <param name=\"bCreateContextMenus\">Creates context menus for add" +
        "ing and deleting model elements if true.</param>\r\n        /// <param name=\"mainM" +
        "odelTreeVm\">Model tree view model, this element vm belongs to.</param>\r\n\t\t[Syste" +
        "m.Diagnostics.CodeAnalysis.SuppressMessage(\"Microsoft.Reliability\", \"CA2000:Disp" +
        "ose objects before losing scope\")]\r\n        public override DslEditorViewModelMo" +
        "delTree::ModelElementTreeViewModel CreateModelElementTreeViewModel(DslModeling::" +
        "ModelElement element, DslModeling::ElementLink link, System.Guid domainRoleId, D" +
        "slEditorViewModelModelTree::ModelElementTreeViewModel parent, bool bHookUpEvents" +
        ", bool bCreateContextMenus, DslEditorViewModel::MainModelTreeViewModel mainModel" +
        "TreeVm)\r\n\t\t{\r\n\t\t\tif( element is DslEditorModeling::IDomainModelOwnable )\r\n\t\t\t{\r\n" +
        "");

        
        #line default
        #line hidden
        
        #line 420 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	    col =dm.Store.ElementDirectory.FindElements<MetaModel>();
		foreach(MetaModel metaModel in col)
		{

        
        #line default
        #line hidden
        
        #line 424 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\t\tif( ");

        
        #line default
        #line hidden
        
        #line 425 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 425 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("DomainModel.DomainModelId == (element as DslEditorModeling::IDomainModelOwnable)." +
        "GetDomainModelTypeId() )\r\n\t\t\t\t\treturn new ");

        
        #line default
        #line hidden
        
        #line 426 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.Namespace));

        
        #line default
        #line hidden
        
        #line 426 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.ModelTree.ModelTree");

        
        #line default
        #line hidden
        
        #line 426 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.Name));

        
        #line default
        #line hidden
        
        #line 426 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModel(this.Store, element, link, domainRoleId, parent, bHookUpEvents, bCreate" +
        "ContextMenus, mainModelTreeVm); \r\n");

        
        #line default
        #line hidden
        
        #line 427 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 429 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\t}\r\n\t\t\t\r\n\t\t\treturn new DslEditorViewModelModelTree::ModelElementTreeViewModel(t" +
        "his.Store, element, link, domainRoleId, parent, bHookUpEvents, bCreateContextMen" +
        "us, mainModelTreeVm); \r\n\t\t}\r\n\t\t#endregion\r\n\t\t\r\n\t\t#region CreatePropertyEditorVie" +
        "wModels\r\n\t\t/// <summary>\r\n        /// Returns a collection of property grid view" +
        " models for the given selected elements.\r\n        /// </summary>\r\n        /// <p" +
        "aram name=\"elements\">Selected elements collection.</param>\r\n        /// <returns" +
        ">Collection of property view models. Can be empty.</returns>\r\n        public ove" +
        "rride System.Collections.Generic.List<DslEditorViewModelPropertyGrid::PropertyGr" +
        "idViewModel> CreatePropertyEditorViewModels(DslEditorModeling::SelectedItemsColl" +
        "ection elements)\r\n\t\t{\r\n\t\t\tSystem.Collections.Generic.List<DslEditorViewModelProp" +
        "ertyGrid::PropertyGridViewModel> collection = new System.Collections.Generic.Lis" +
        "t<DslEditorViewModelPropertyGrid::PropertyGridViewModel>();\r\n\r\n\t\t\tforeach(DslMod" +
        "eling::ModelElement modelElement in elements )\r\n\t\t\t{\r\n\t\t\t\tSystem.Collections.Gen" +
        "eric.List<DslEditorViewModelData::ViewModelStore> handledStores = new System.Col" +
        "lections.Generic.List<DslEditorViewModelData::ViewModelStore>();\r\n\t\t\t\tAddPropert" +
        "yEditorViewModels(collection, modelElement, handledStores);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tretur" +
        "n collection;\r\n\t\t}\r\n\t\t\r\n        /// <summary>\r\n        /// Returns a collection " +
        "of property view models for the given selected elements.\r\n        /// </summary>" +
        "\r\n        /// <param name=\"models\">Already gathered models.</param>\r\n        ///" +
        " <param name=\"modelElement\">ModelElement.</param>\r\n        /// <param name=\"hand" +
        "ledStores\">Stores that have already been processed.</param>\r\n        /// <return" +
        "s>Collection of property view models. Can be empty.</returns>\r\n        public ov" +
        "erride bool AddPropertyEditorViewModels(System.Collections.Generic.List<DslEdito" +
        "rViewModelPropertyGrid::PropertyGridViewModel> models, DslModeling::ModelElement" +
        " modelElement, System.Collections.Generic.List<DslEditorViewModelData::ViewModel" +
        "Store> handledStores)\r\n\t\t{\r\n\t\t\tif( handledStores.Contains(this.Store) )\r\n\t\t\t\tret" +
        "urn false;\r\n\t\t\telse \r\n\t\t\t\thandledStores.Add(this.Store);\r\n\r\n");

        
        #line default
        #line hidden
        
        #line 469 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	bFirstIf = true;

	IEnumerable<AttributedDomainElement> domainElements = CodeGenerationUtilities.GetElementsForPropertyGridViewModelCreation(dm);
	foreach(AttributedDomainElement domainElement in domainElements)
	{
		if( domainElement.InheritanceModifier == InheritanceModifier.Abstract )
			continue;

		
		if( bFirstIf )
		{
			bFirstIf = false;

        
        #line default
        #line hidden
        
        #line 482 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tif");

        
        #line default
        #line hidden
        
        #line 482 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}
		else
		{

        
        #line default
        #line hidden
        
        #line 486 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\telse if");

        
        #line default
        #line hidden
        
        #line 486 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}

        
        #line default
        #line hidden
        
        #line 488 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("( modelElement.GetDomainClass().Id == ");

        
        #line default
        #line hidden
        
        #line 488 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainElement.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 488 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".DomainClassId )\r\n\t\t\t{\r\n\t\t\t\tmodels.Add(new PropertyGrid");

        
        #line default
        #line hidden
        
        #line 490 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainElement.Name));

        
        #line default
        #line hidden
        
        #line 490 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("ViewModel(this.Store, modelElement as ");

        
        #line default
        #line hidden
        
        #line 490 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(domainElement.GetFullName(true)));

        
        #line default
        #line hidden
        
        #line 490 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 493 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	}
	if( domainElements.Count() > 0 )
	{

        
        #line default
        #line hidden
        
        #line 497 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tforeach(DslEditorViewModelData::ViewModelStore eS in this.Stor" +
        "e.ExternStores)\r\n\t\t\t\t\tif( eS.Factory.AddPropertyEditorViewModels(models, modelEl" +
        "ement, handledStores) )\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 504 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	}
	else
	{

        
        #line default
        #line hidden
        
        #line 508 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\tforeach(DslEditorViewModelData::ViewModelStore eS in this.Store.ExternStores)\r\n" +
        "\t\t\tif( eS.Factory.AddPropertyEditorViewModels(models, modelElement, handledStore" +
        "s) )\r\n\t\t\t\treturn true;\r\n");

        
        #line default
        #line hidden
        
        #line 512 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	}

        
        #line default
        #line hidden
        
        #line 514 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"
			return false;
		}
		
		#endregion				
		
		#region CreateRestorableViewModel
        /// <summary>
        /// Attempts at creating a view model of a specified type. This is meant to be called for restorable VMs that are in 
        /// the process of beeing restored.
        /// </summary>
        /// <param name=""vmType"">Type of the vm.</param>
        /// <param name=""handledStores"">Stores that have already been processed.</param>
        /// <returns>VM if succeeded. Null otherwise.</returns>
        public override DslEditorViewDiagrams::BaseDiagramSurfaceViewModel CreateRestorableViewModel(string vmType, System.Collections.Generic.List<DslEditorViewModelData::ViewModelStore> handledStores)
		{
");

        
        #line default
        #line hidden
        
        #line 531 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

	foreach(DiagramClass diagramClass in this.MetaModel.AllDiagramClasses)
	{
		if( !CodeGenerationUtilities.IsDiagramGenerated(diagramClass) )
			continue;
		
		if( diagramClass is RestorableChildlessDiagram || diagramClass is RestorableTemplatedDiagramVMOnly)
		{
			MetaModel metaModel = diagramClass.DiagramClassView.DiagramView.ViewContext.ModelContext.MetaModel;
			string t = metaModel.Name+diagramClass.Name+"SurfaceViewModel";

        
        #line default
        #line hidden
        
        #line 541 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\t\t\tif( vmType == \"");

        
        #line default
        #line hidden
        
        #line 542 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(t));

        
        #line default
        #line hidden
        
        #line 542 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("\" )\r\n\t\t\t{\r\n\t\t\t\treturn new ");

        
        #line default
        #line hidden
        
        #line 544 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(metaModel.Namespace));

        
        #line default
        #line hidden
        
        #line 544 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(".ViewModel.");

        
        #line default
        #line hidden
        
        #line 544 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(t));

        
        #line default
        #line hidden
        
        #line 544 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write("(this.Store);\r\n\t\t\t}\r\n");

        
        #line default
        #line hidden
        
        #line 546 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

		}
	}

        
        #line default
        #line hidden
        
        #line 549 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"
this.Write(@"		
			foreach(DslEditorViewModelData::ViewModelStore eS in this.Store.ExternStores)
			{
				DslEditorViewDiagrams::BaseDiagramSurfaceViewModel vm = eS.Factory.CreateRestorableViewModel(vmType, handledStores);
				if( vm != null )
					return vm;
			}
			
			return null;
		}
		#endregion 
		#endregion
	}	
}
");

        
        #line default
        #line hidden
        
        #line 564 "J:\Uni\CC Processes\Werkzeuge\PDE 2\Tum.PDE.ToolFramework\Tum.PDE.ToolFramework.Templates\ViewModel\ViewModelDataGenerator.tt"

}

        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}
